local Game = {}
local MAP_WIDTH = 32
local MAP_HEIGHT = 23
local TILE_WIDTH = 32
local TILE_HEIGHT = 32

Game.Map = {}
Game.Map = {
    {
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        61,
        10,
        13,
        10,
        10,
        10,
        10,
        10,
        10,
        13,
        14,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15
    },
    {
        10,
        10,
        10,
        10,
        10,
        11,
        11,
        11,
        10,
        10,
        10,
        13,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        14,
        15,
        15,
        129,
        15,
        15,
        15,
        15,
        15,
        15,
        68,
        15,
        15
    },
    {
        10,
        10,
        61,
        10,
        11,
        19,
        19,
        19,
        11,
        10,
        10,
        13,
        10,
        10,
        169,
        10,
        10,
        10,
        10,
        13,
        14,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15
    },
    {
        10,
        10,
        10,
        11,
        19,
        19,
        19,
        19,
        19,
        11,
        10,
        13,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        13,
        14,
        15,
        15,
        15,
        68,
        15,
        15,
        15,
        15,
        15,
        15
    },
    {
        10,
        10,
        10,
        11,
        19,
        19,
        19,
        19,
        19,
        11,
        10,
        13,
        10,
        10,
        10,
        10,
        10,
        10,
        61,
        10,
        10,
        14,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15
    },
    {
        10,
        10,
        61,
        10,
        11,
        19,
        19,
        19,
        11,
        10,
        10,
        13,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        14,
        15,
        15,
        129,
        15,
        15,
        15,
        68,
        15,
        129,
        15
    },
    {
        10,
        10,
        10,
        10,
        10,
        11,
        11,
        11,
        10,
        10,
        61,
        13,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        14,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15
    },
    {
        10,
        10,
        10,
        10,
        10,
        13,
        13,
        13,
        13,
        13,
        13,
        13,
        10,
        10,
        10,
        10,
        10,
        169,
        10,
        10,
        10,
        13,
        14,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15,
        15
    },
    {
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        13,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        61,
        10,
        13,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        15,
        129
    },
    {
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        13,
        55,
        10,
        58,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        13,
        14,
        14
    },
    {
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        13,
        10,
        10,
        10,
        55,
        10,
        58,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10
    },
    {
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        13,
        10,
        58,
        10,
        10,
        10,
        10,
        10,
        10,
        169,
        10,
        10,
        10,
        10,
        10,
        10,
        61,
        10,
        10,
        10,
        10,
        10,
        1,
        1
    },
    {
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        13,
        10,
        10,
        10,
        58,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        61,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        1,
        37,
        37
    },
    {
        13,
        13,
        13,
        13,
        13,
        13,
        13,
        13,
        13,
        10,
        55,
        10,
        10,
        10,
        55,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        1,
        1,
        37,
        37,
        37
    },
    {
        10,
        10,
        10,
        10,
        13,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        55,
        10,
        10,
        10,
        10,
        169,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        1,
        37,
        37,
        37,
        37,
        37
    },
    {
        10,
        10,
        10,
        10,
        13,
        10,
        10,
        10,
        10,
        142,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        1,
        37,
        37,
        37,
        37,
        37,
        37
    },
    {
        10,
        10,
        10,
        10,
        13,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        142,
        10,
        10,
        10,
        10,
        10,
        10,
        10,
        169,
        10,
        10,
        1,
        37,
        37,
        37,
        37,
        37,
        37,
        37
    },
    {
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        1,
        37,
        37,
        37,
        37,
        37,
        37,
        37
    },
    {
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        14,
        1,
        37,
        37,
        37,
        37,
        37,
        37,
        37
    },
    {
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        19,
        1,
        37,
        37,
        37,
        37,
        37,
        37,
        37
    },
    {
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        20,
        1,
        37,
        37,
        37,
        37,
        37,
        37
    },
    {
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        1,
        37,
        37,
        37,
        37
    },
    {
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        21,
        1,
        37,
        37,
        37
    }
}

Game.TileSheet = nil
Game.TileTextures = {}
Game.TileTypes = {}

function Game.Load()
    print("Game: Chargement des textures...")

    Game.TileSheet = love.graphics.newImage("images/tilesheet.png")
    local nbCol = Game.TileSheet:getWidth() / TILE_WIDTH
    local nbLin = Game.TileSheet:getHeight() / TILE_HEIGHT

    Game.TileTextures[0] = nil
    local index = 1
    for l = 1, nbLin do
        for c = 1, nbCol do
            Game.TileTextures[index] =
                love.graphics.newQuad(
                (c - 1) * TILE_WIDTH,
                (l - 1) * TILE_HEIGHT,
                TILE_WIDTH,
                TILE_HEIGHT,
                Game.TileSheet:getWidth(),
                Game.TileSheet:getHeight()
            )
            index = index + 1
        end
    end

    Game.TileTypes[1] = "Gravel"
    Game.TileTypes[10] = "Grass"
    Game.TileTypes[11] = "Grass"
    Game.TileTypes[13] = "Sand"
    Game.TileTypes[14] = "Sand"
    Game.TileTypes[15] = "Sand"
    Game.TileTypes[19] = "Water"
    Game.TileTypes[20] = "Water"
    Game.TileTypes[21] = "Sea"
    Game.TileTypes[37] = "Lava"
    Game.TileTypes[55] = "Tree"
    Game.TileTypes[58] = "Tree"
    Game.TileTypes[61] = "Tree"
    Game.TileTypes[68] = "Tree"
    Game.TileTypes[142] = "Tree"
    Game.TileTypes[169] = "Rock"
    Game.TileTypes[129] = "Rock"

    print("Game: Chargement des textures terminees...")
end

function Game.Draw()
    for l = 1, MAP_HEIGHT do -- y
        for c = 1, MAP_WIDTH do -- x
            local id = Game.Map[l][c]
            local texQuad = Game.TileTextures[id]
            if (texQuad ~= nil) then
                love.graphics.draw(Game.TileSheet, texQuad, (c - 1) * TILE_WIDTH, (l - 1) * TILE_HEIGHT)
            end
        end
    end

    local px = love.mouse.getX()
    local py = love.mouse.getY()
    local col = math.floor(px / TILE_WIDTH) + 1
    local lin = math.floor(py / TILE_HEIGHT) + 1

    if (col > 0 and col <= MAP_WIDTH) and (lin > 0 and lin <= MAP_HEIGHT) then
        local id = Game.Map[lin][col]
        love.graphics.print("Type de Tile: " .. tostring(Game.TileTypes[id]), 1, 1)
    else
        love.graphics.print("Hors du tableau", 1, 1)
    end
end

return Game
